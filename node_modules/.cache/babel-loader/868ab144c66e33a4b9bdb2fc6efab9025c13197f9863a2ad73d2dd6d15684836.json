{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shahid Khan\\\\Downloads\\\\chating_tool\\\\src\\\\pages\\\\main\\\\channels\\\\chat.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport './chat.css';\nimport Axios from 'axios';\nimport Message from \"../../../components/message\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GETMESSAGESDATA } from '../../../redux/actions';\nimport { BrowserRouter as Router, Routes as Switch, Route, Link, redirect, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst storage = localStorage.getItem('userInfo');\nconst parse = JSON.parse(storage);\nconst user_id = window.location.pathname.split(\"/\")[2];\nconst getMessagesData = receiver_id => {\n  console.log(receiver_id);\n  try {\n    return dispatch => {\n      Axios.get(`http://localhost:5000/message/previewMessages?sender_id=${parse.id}&&receiver_id=${receiver_id}`).then(res => {\n        dispatch({\n          type: GETMESSAGESDATA,\n          payload: res.data.messages\n        });\n      }).catch(err => {\n        console.log(\"Something Went Wrong\");\n        console.log(err);\n      });\n    };\n  } catch (error) {\n    // Add custom logic to handle errors\n    console.log(\"error world\");\n    console.log(error);\n  }\n};\nexport default function Chat() {\n  _s();\n  const dispatch = useDispatch();\n  const data = useSelector(state => state.messagesData.data);\n  const messagesEndRef = useRef();\n  const [message, setMessage] = useState(\"\");\n  let navigate = useNavigate();\n  const sendMessage = () => {\n    if (message.length < 1) {\n      return;\n    }\n    const data = new FormData();\n    data.append(\"content\", message);\n    data.append(\"sender_id\", parse.id);\n    data.append(\"receiver_id\", user_id);\n    Axios.post('http://localhost:5000/message/send', data).then(res => {\n      if (res.data.msg == \"Message sent successfully\") {\n        fetchData();\n      }\n    });\n  };\n  const is_loggedin = () => {\n    if (!localStorage.getItem('userInfo')) {\n      navigate('/signin');\n    }\n  };\n  const fetchData = () => dispatch(getMessagesData(window.location.pathname.split(\"/\")[2]));\n  useEffect(() => {\n    setInterval(() => {\n      fetchData();\n    }, 10000);\n    is_loggedin();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat_window\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        style: {\n          textDecoration: 'none',\n          padding: 5\n        },\n        to: \"/home\",\n        children: \"Back to home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top_menu\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: \"Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"messages\",\n        ref: messagesEndRef,\n        children: data.map(message => /*#__PURE__*/_jsxDEV(Message, {\n          message: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom_wrapper clearfix\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message_input_wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: val => setMessage(val.target.value),\n            className: \"message_input\",\n            placeholder: \"Type your message here...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => sendMessage(),\n          className: \"send_message\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(Chat, \"MRWzzO7MDq24pZqNIwLyoTEaiCY=\", false, function () {\n  return [useDispatch, useSelector, useNavigate];\n});\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Axios","Message","useDispatch","useSelector","GETMESSAGESDATA","BrowserRouter","Router","Routes","Switch","Route","Link","redirect","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","storage","localStorage","getItem","parse","JSON","user_id","window","location","pathname","split","getMessagesData","receiver_id","console","log","dispatch","get","id","then","res","type","payload","data","messages","catch","err","error","Chat","_s","state","messagesData","messagesEndRef","message","setMessage","navigate","sendMessage","length","FormData","append","post","msg","fetchData","is_loggedin","setInterval","children","className","style","textDecoration","padding","to","fileName","_jsxFileName","lineNumber","columnNumber","ref","map","onChange","val","target","value","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Shahid Khan/Downloads/chating_tool/src/pages/main/channels/chat.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport './chat.css'\nimport Axios from 'axios'\nimport Message from \"../../../components/message\";\nimport {useDispatch, useSelector} from 'react-redux';\nimport { GETMESSAGESDATA } from '../../../redux/actions';\nimport {\n  BrowserRouter as Router,\n  Routes as Switch,\n  Route,\n  Link,\n  redirect,\n  useNavigate\n} from \"react-router-dom\";\n\n\nconst storage = localStorage.getItem('userInfo')\nconst parse = JSON.parse(storage)\nconst user_id = window.location.pathname.split(\"/\")[2]\nconst getMessagesData = (receiver_id) => {\n  console.log(receiver_id)\n  try {\n    return dispatch => {\n      \n     Axios.get(`http://localhost:5000/message/previewMessages?sender_id=${parse.id}&&receiver_id=${receiver_id}`).then(res=>{\n        dispatch({\n          type: GETMESSAGESDATA,\n          payload: res.data.messages\n        });\n      })\n      .catch(err=>{\n        console.log(\"Something Went Wrong\")\n        console.log(err)\n      })\n     \n    };\n  } catch (error) {\n    // Add custom logic to handle errors\n    console.log(\"error world\")\n    \n    console.log(error);\n  }\n}\n\nexport default function Chat(){\n  const dispatch = useDispatch()\n  const data = useSelector(state => state.messagesData.data);\n  \n  const messagesEndRef =useRef()\n   const [message,setMessage] = useState(\"\")\n   let navigate = useNavigate()\n\n   const sendMessage = () => {\n    if(message.length<1){\n      return\n    }\n\n    const data = new FormData()\n    data.append(\"content\", message)\n    data.append(\"sender_id\", parse.id)\n    data.append(\"receiver_id\", user_id)\n\n    Axios.post('http://localhost:5000/message/send', data).then((res) => {\n      if(res.data.msg == \"Message sent successfully\"){\n        fetchData()\n      } \n    })\n    \n\n   }\n \n  \n  \n   const is_loggedin = ()=>{\n    if(!localStorage.getItem('userInfo')){\n      navigate('/signin')\n\n    }\n    }\n\n    const fetchData = ()=> dispatch(getMessagesData(window.location.pathname.split(\"/\")[2])) \n\n   useEffect(()=>{\n    setInterval(() => {\n      fetchData()\n    }, 10000);\n\n    is_loggedin()\n    \n   },[])\n\n  \n \n        return <>\n\n        <div className=\"chat_window\" >\n          <Link style={{textDecoration:'none', padding:5}} to=\"/home\">Back to home</Link>\n        \n          <div className=\"top_menu\" >\n\n\n         \n            <div className=\"title\">Chat</div>\n          </div>\n          <ul className=\"messages\" ref={messagesEndRef}>\n          \n          {data.map((message) => (\n            <Message message={message}/>\n          ))}\n          \n\n      \n\n\n       \n\n            </ul>\n          <div className=\"bottom_wrapper clearfix\">\n            <div className=\"message_input_wrapper\">\n              <input\n                onChange={(val)=>setMessage(val.target.value)}\n                className=\"message_input\"\n                placeholder=\"Type your message here...\"\n              />\n            </div>\n            <div onClick={() => sendMessage()}  className=\"send_message\">\n              <div className=\"icon\" />\n              <div className=\"text\">Send</div>\n            </div>\n          </div>\n        </div>\n       \n\n\n     \n \n      </>\n      \n    }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}