{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shahid Khan\\\\Downloads\\\\chating_tool\\\\src\\\\pages\\\\main\\\\channels\\\\chat.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport './chat.css';\nimport Axios from 'axios';\nimport Message from \"../../../components/message\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GETMESSAGESDATA } from '../../../redux/actions';\nimport { BrowserRouter as Router, Routes as Switch, Route, Link, redirect, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst storage = localStorage.getItem('userInfo');\nconst parse = JSON.parse(storage);\nconst getMessagesData = receiver_id => {\n  console.log(receiver_id);\n  try {\n    return dispatch => {\n      Axios.get(`http://localhost:5000/message/previewMessages?sender_id=${parse.id}&&receiver_id=${receiver_id}`).then(res => {\n        dispatch({\n          type: GETMESSAGESDATA,\n          payload: res.data.messages\n        });\n      }).catch(err => {\n        console.log(\"Something Went Wrong\");\n        console.log(err);\n      });\n    };\n  } catch (error) {\n    // Add custom logic to handle errors\n    console.log(\"error world\");\n    console.log(error);\n  }\n};\nexport default function Chat() {\n  _s();\n  const dispatch = useDispatch();\n  const data = useSelector(state => state.messagesData.data);\n  const messagesEndRef = useRef();\n  const [message, setMessage] = useState(\"\");\n  let navigate = useNavigate();\n  const sendMessage = () => {\n    if (message.length < 1) {\n      return;\n    }\n    const data = new FormData();\n    data.append(\"content\", message);\n    data.append(\"sender_id\", parse.id);\n    data.append(\"receiver_id\", window.location.pathname.split(\"/\")[2]);\n    Axios.post('http://localhost:5000/message/send', data).then(res => {\n      if (res.data.msg == \"Message sent successfully\") {\n        fetchData();\n      }\n    });\n  };\n  const is_loggedin = () => {\n    if (!localStorage.getItem('userInfo')) {\n      navigate('/signin');\n    }\n  };\n  const fetchData = () => dispatch(getMessagesData(window.location.pathname.split(\"/\")[2]));\n  useEffect(() => {\n    setInterval(() => {\n      fetchData();\n    }, 10000);\n    is_loggedin();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat_window\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top_menu\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: \"Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"messages\",\n        ref: messagesEndRef,\n        children: data.map(message => /*#__PURE__*/_jsxDEV(Message, {\n          message: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom_wrapper clearfix\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message_input_wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: val => setMessage(val.target.value),\n            className: \"message_input\",\n            placeholder: \"Type your message here...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => sendMessage(),\n          className: \"send_message\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(Chat, \"MRWzzO7MDq24pZqNIwLyoTEaiCY=\", false, function () {\n  return [useDispatch, useSelector, useNavigate];\n});\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Axios","Message","useDispatch","useSelector","GETMESSAGESDATA","BrowserRouter","Router","Routes","Switch","Route","Link","redirect","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","storage","localStorage","getItem","parse","JSON","getMessagesData","receiver_id","console","log","dispatch","get","id","then","res","type","payload","data","messages","catch","err","error","Chat","_s","state","messagesData","messagesEndRef","message","setMessage","navigate","sendMessage","length","FormData","append","window","location","pathname","split","post","msg","fetchData","is_loggedin","setInterval","children","className","fileName","_jsxFileName","lineNumber","columnNumber","ref","map","onChange","val","target","value","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Shahid Khan/Downloads/chating_tool/src/pages/main/channels/chat.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport './chat.css'\nimport Axios from 'axios'\nimport Message from \"../../../components/message\";\nimport {useDispatch, useSelector} from 'react-redux';\nimport { GETMESSAGESDATA } from '../../../redux/actions';\nimport {\n  BrowserRouter as Router,\n  Routes as Switch,\n  Route,\n  Link,\n  redirect,\n  useNavigate\n} from \"react-router-dom\";\n\n\nconst storage = localStorage.getItem('userInfo')\nconst parse = JSON.parse(storage)\n\nconst getMessagesData = (receiver_id) => {\n  console.log(receiver_id)\n  try {\n    return dispatch => {\n      \n     Axios.get(`http://localhost:5000/message/previewMessages?sender_id=${parse.id}&&receiver_id=${receiver_id}`).then(res=>{\n        dispatch({\n          type: GETMESSAGESDATA,\n          payload: res.data.messages\n        });\n      })\n      .catch(err=>{\n        console.log(\"Something Went Wrong\")\n        console.log(err)\n      })\n     \n    };\n  } catch (error) {\n    // Add custom logic to handle errors\n    console.log(\"error world\")\n    \n    console.log(error);\n  }\n}\n\nexport default function Chat(){\n  const dispatch = useDispatch()\n  const data = useSelector(state => state.messagesData.data);\n  \n  const messagesEndRef =useRef()\n   const [message,setMessage] = useState(\"\")\n   let navigate = useNavigate()\n\n   const sendMessage = () => {\n    if(message.length<1){\n      return\n    }\n\n    const data = new FormData()\n    data.append(\"content\", message)\n    data.append(\"sender_id\", parse.id)\n    data.append(\"receiver_id\", window.location.pathname.split(\"/\")[2])\n\n    Axios.post('http://localhost:5000/message/send', data).then((res) => {\n      if(res.data.msg == \"Message sent successfully\"){\n        fetchData()\n      } \n    })\n    \n\n   }\n \n  \n  \n   const is_loggedin = ()=>{\n    if(!localStorage.getItem('userInfo')){\n      navigate('/signin')\n\n    }\n    }\n\n    const fetchData = ()=> dispatch(getMessagesData(window.location.pathname.split(\"/\")[2])) \n\n   useEffect(()=>{\n    setInterval(() => {\n      fetchData()\n    }, 10000);\n\n    is_loggedin()\n    \n   },[])\n\n  \n \n        return <>\n\n        <div className=\"chat_window\" >\n        \n          <div className=\"top_menu\" >\n\n\n         \n            <div className=\"title\">Chat</div>\n          </div>\n          <ul className=\"messages\" ref={messagesEndRef}>\n          \n          {data.map((message) => (\n            <Message message={message}/>\n          ))}\n          \n\n      \n\n\n       \n\n            </ul>\n          <div className=\"bottom_wrapper clearfix\">\n            <div className=\"message_input_wrapper\">\n              <input\n                onChange={(val)=>setMessage(val.target.value)}\n                className=\"message_input\"\n                placeholder=\"Type your message here...\"\n              />\n            </div>\n            <div onClick={() => sendMessage()}  className=\"send_message\">\n              <div className=\"icon\" />\n              <div className=\"text\">Send</div>\n            </div>\n          </div>\n        </div>\n       \n\n\n     \n \n      </>\n      \n    }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}