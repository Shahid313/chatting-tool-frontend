{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shahid Khan\\\\Downloads\\\\chating_tool\\\\src\\\\components\\\\message.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst storage = localStorage.getItem('userInfo');\nconst parse = JSON.parse(storage);\nexport default function Message(_ref) {\n  _s();\n  let {\n    message,\n    fetchData\n  } = _ref;\n  const [is_liked, setIsLiked] = useState(false);\n  const deleteMessage = () => {\n    Axios.get(`http://localhost:5000/message/deleteMessage?message_id=${message._id}`).then(res => {\n      console.log(res.data.msg);\n      if (res.data.msg === 'Deleted') {\n        console.log('Deleted');\n      } else {\n        alert(\"Something went wrong\");\n      }\n      fetchData();\n    });\n  };\n  const likeUnlikeMessage = () => {\n    let formData = new FormData();\n    formData.append(\"message_id\", message._id);\n    formData.append(\"liked_by_id\", parse.id);\n    Axios.post(\"http://localhost:5000/message/like\", formData).then(res => {\n      if (res.data.msg == \"Liked successfully\") {\n        setIsLiked(true);\n      } else if (res.data.msg == \"Unliked successfully\") {\n        setIsLiked(false);\n      } else {\n        alert(\"Something went wrong\");\n      }\n      fetchData();\n    }).catch(err => {\n      alert(err.message);\n    });\n  };\n  useEffect(() => {\n    message.likes.map(like => {\n      if (like.liked_by_id === parse.id) {\n        setIsLiked(true);\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: `message ${message.sender_id === parse.id ? `right` : `left`} `,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text_wrapper\",\n      children: [message.sender_id === parse.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/user/${parse.id}`,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `http://localhost:5000/uploads/${parse.profile_image}`,\n            style: {\n              width: '100%',\n              height: 60,\n              borderRadius: '50%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/user/${message.reciever[0]._id}`,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `http://localhost:5000/uploads/${message.reciever[0].profile_image}`,\n            style: {\n              width: '100%',\n              height: 60,\n              borderRadius: '50%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text mt-3\",\n        children: [message.sender_id != parse.id ? /*#__PURE__*/_jsxDEV(Link, {\n          to: `/user/${message.reciever[0]._id}`,\n          children: [\"\\xA0\", /*#__PURE__*/_jsxDEV(\"b\", {\n            style: {\n              color: 'black'\n            },\n            children: message.reciever[0].username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }, this) : /*#__PURE__*/_jsxDEV(Link, {\n          to: `/user/${parse.id}`,\n          children: [\"\\xA0\", /*#__PURE__*/_jsxDEV(\"b\", {\n            style: {\n              color: 'black'\n            },\n            children: \"Me\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => deleteMessage(),\n        className: \"btn btn-danger float-right\",\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          float: 'right',\n          marginTop: 5,\n          cursor: 'pointer'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-thumbs-up\",\n          onClick: () => likeUnlikeMessage(),\n          style: {\n            fontSize: 20,\n            marginRight: 10,\n            color: is_liked ? 'blue' : 'black'\n          },\n          children: [\"(\", message.likes.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: message.date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 12\n  }, this);\n}\n_s(Message, \"PH56iqsT/+5nLNx46ncqx7mCVtQ=\");\n_c = Message;\nvar _c;\n$RefreshReg$(_c, \"Message\");","map":{"version":3,"names":["React","useEffect","useState","Axios","Link","jsxDEV","_jsxDEV","storage","localStorage","getItem","parse","JSON","Message","_ref","_s","message","fetchData","is_liked","setIsLiked","deleteMessage","get","_id","then","res","console","log","data","msg","alert","likeUnlikeMessage","formData","FormData","append","id","post","catch","err","likes","map","like","liked_by_id","className","sender_id","children","to","src","profile_image","style","width","height","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","reciever","color","username","content","onClick","float","marginTop","cursor","fontSize","marginRight","length","date","_c","$RefreshReg$"],"sources":["C:/Users/Shahid Khan/Downloads/chating_tool/src/components/message.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Axios from 'axios'\nimport { Link } from 'react-router-dom';\n\nconst storage = localStorage.getItem('userInfo')\nconst parse = JSON.parse(storage)\n\nexport default function Message({message,fetchData}){\n  const [is_liked,setIsLiked] = useState(false)\n\n  const deleteMessage = () => {\n    Axios.get(`http://localhost:5000/message/deleteMessage?message_id=${message._id}`).then(res => {\n      console.log(res.data.msg)\n      if(res.data.msg === 'Deleted'){\n        console.log('Deleted')\n      }else{\n        alert(\"Something went wrong\")\n      }\n      fetchData()\n    })\n  }\n\n  const likeUnlikeMessage = () => {\n    let formData = new FormData();\n    formData.append(\"message_id\",message._id);\n    formData.append(\"liked_by_id\",parse.id);\n\n    Axios.post(\"http://localhost:5000/message/like\",formData)\n    .then(res=>{\n      if(res.data.msg == \"Liked successfully\"){\n        setIsLiked(true)\n      }else if(res.data.msg == \"Unliked successfully\"){\n        setIsLiked(false)\n      }else{\n        alert(\"Something went wrong\")\n      }\n\n      fetchData()\n      \n    })\n    .catch(err=>{ \n      alert(err.message)\n    })\n  }\n\n    \n   useEffect(() => {\n    message.likes.map((like) => {\n      if(like.liked_by_id === parse.id){\n          setIsLiked(true)\n      }\n    })\n   },[])\n\n   \n    return <li className={`message ${message.sender_id === parse.id ? `right`:`left`} `}>\n            \n    <div className=\"text_wrapper\">\n    \n    {message.sender_id === parse.id ?\n    <div className=\"avatar\" >\n    <Link to={`/user/${parse.id}`}>\n    <img src={`http://localhost:5000/uploads/${parse.profile_image}`} style={{width:'100%',height:60,borderRadius:'50%'}}/>\n    </Link>\n    </div>:\n    <div className=\"avatar\">\n    <Link to={`/user/${message.reciever[0]._id}`}>\n    <img src={`http://localhost:5000/uploads/${message.reciever[0].profile_image}`} style={{width:'100%',height:60,borderRadius:'50%'}}/>\n    </Link>\n    </div>}\n\n      <div className=\"text mt-3\" >\n      {message.sender_id != parse.id ?\n      <Link to={`/user/${message.reciever[0]._id}`}>\n         \n      &nbsp;<b style={{color:'black'}}>{message.reciever[0].username}</b>\n      \n      </Link>:\n      <Link to={`/user/${parse.id}`}>\n         \n      &nbsp;<b style={{color:'black'}}>Me</b>\n      \n      </Link>}\n\n        <br />\n           <p>{message.content}</p>\n        </div>\n\n\n        <br />\n      <button onClick={() => deleteMessage()} className='btn btn-danger float-right'>Delete</button>\n\n\n        <div style={{float:'right',marginTop:5, cursor:'pointer'}}>\n        <i className=\"fa fa-thumbs-up\" onClick={() => likeUnlikeMessage()} style={{fontSize:20,marginRight:10,color:is_liked?'blue':'black'}}>({message.likes.length})</i>\n        </div>\n        \n\n      <div style={{marginTop:10}}>\n       <p>{message.date}</p>\n       </div>\n      \n    </div>\n  </li>\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}